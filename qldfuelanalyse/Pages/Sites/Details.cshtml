@page "{id:int?}"
@model qldfuelanalyse.Pages.Sites.DetailsModel

@{
    ViewData["Title"] = "Details";
}

@section Scripts
{
    <script src="https://cdn.jsdelivr.net/npm/vega@5.10.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.5.2"></script>
    <script src="~/js/graphs.js"></script>
    @{string priceUrl = String.Format("https://localhost:44338/api/prices/{0}/?fueltype={1}"
                                          , Model.SitesObj.Sites.First().SiteId, Model.SitesObj.QueryInfo.FuelTypes.First());}
    @{string graphTitle = String.Format("{0} Fuel Price vs Date ({1})"
                                , Model.SitesObj.QueryInfo.FuelTypes.First(), Model.SitesObj.Sites.First().SiteName);}
    <script>create_single_price_graph("@priceUrl", "@graphTitle", "vegagraph1")</script>
}

<h2>Details</h2>

<div>
    <hr />
    <p>
        @Html.DisplayFor(model => model.SitesObj.Sites.First().SiteId)
    </p>
    <p>
        @Html.DisplayFor(model => model.SitesObj.Sites.First().SiteName)
    </p>
    <p>
        @Html.DisplayFor(model => model.SitesObj.Sites.First().SiteSuburb)
    </p>
    <p>
        @Html.DisplayFor(model => model.SitesObj.Sites.First().SitePostCode)
    </p>
    <div id="vegagraph1" class="container"></div>
    <a asp-page="./Index">Back to Site List</a>
</div>